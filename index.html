<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Console box with Copy</title>
<style>
  :root{
    --bg:#0f1720;
    --panel:#0b1220;
    --accent:#10b981;
    --muted:#94a3b8;
    --glass: rgba(255,255,255,0.03);
  }

  body{
    font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: linear-gradient(180deg,#071024 0%, #071a2a 100%);
    color: #e6eef6;
    padding: 28px;
    display:flex;
    align-items:center;
    justify-content:center;
    min-height:100vh;
  }

  .console-wrap{
    width: min(900px, 96%);
    border-radius:12px;
    box-shadow: 0 8px 30px rgba(2,6,23,0.6);
    background: linear-gradient(180deg,var(--panel), rgba(8,12,18,0.7));
    padding: 16px;
  }

  .console-header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:12px;
    margin-bottom:10px;
  }

  .title {
    display:flex;
    align-items:center;
    gap:10px;
  }
  .dots {
    display:flex;
    gap:6px;
  }
  .dot {
    width:11px;height:11px;border-radius:50%;
    background:var(--glass);
    box-shadow: inset 0 -2px 0 rgba(0,0,0,0.4);
  }
  .dot.red { background: #ff5f56; }
  .dot.yellow { background: #ffbd2e; }
  .dot.green { background: #27c93f; }

  .controls {
    display:flex;
    gap:8px;
    align-items:center;
  }

  .copy-btn{
    background:transparent;
    border:1px solid rgba(255,255,255,0.06);
    color:var(--muted);
    padding:8px 12px;
    border-radius:8px;
    font-weight:600;
    cursor:pointer;
    display:inline-flex;
    gap:8px;
    align-items:center;
    user-select:none;
  }
  .copy-btn:hover{ color:var(--accent); border-color: rgba(16,185,129,0.18); }

  /* Console area */
  pre.console {
    margin:0;
    padding:18px;
    border-radius:10px;
    background: linear-gradient(180deg,#07121a,#06141f);
    color:#dbeafe;
    font-family: "SFMono-Regular", Menlo, Monaco, "Roboto Mono", "Courier New", monospace;
    font-size:14px;
    line-height:1.45;
    white-space:pre-wrap;
    overflow:auto;
    max-height:360px;
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
    border: 1px solid rgba(255,255,255,0.03);
  }

  /* small tooltip message */
  .copied {
    font-size:13px;
    color:var(--accent);
    opacity:0;
    transform:translateY(-4px);
    transition: 180ms ease;
  }
  .copied.show {
    opacity:1;
    transform:translateY(0);
  }

  /* make code selectable when clicking */
  pre.console::selection {
    background: rgba(16,185,129,0.22);
    color: inherit;
  }

  /* Responsive tweak */
  @media (max-width:420px){
    .copy-btn{ padding:7px 10px; font-size:13px; }
  }
</style>
</head>
<body>

<div class="console-wrap" role="region" aria-label="Console example">
  <div class="console-header">
    <div class="title" aria-hidden="true">
      <div class="dots" title="window controls">
        <span class="dot red"></span>
        <span class="dot yellow"></span>
        <span class="dot green"></span>
      </div>
      <strong style="font-size:14px">Terminal</strong>
      <span style="color:var(--muted); font-size:13px; margin-left:8px;">/ output.log</span>
    </div>

    <div class="controls">
      <div id="copiedMsg" class="copied" aria-live="polite">Copied!</div>
      <button id="copyBtn" class="copy-btn" title="Copy to clipboard" aria-label="Sao chép nội dung">
        <!-- simple icon -->
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M9 9H5a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-4" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
          <rect x="9" y="3" width="11" height="14" rx="2" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Copy
      </button>
    </div>
  </div>

  <!-- console text - keep id to reference from JS -->
  <pre id="consolePre" class="console" tabindex="0" role="textbox" aria-readonly="true">
$ python process.py --input data/video.mp4
[INFO] Loading video...
[INFO] Extracting frames (1/3240)
[✓] Converted segment 0001.mp4 (00:00:00 - 00:00:10)
[✖] Warning: frame 240 corrupted, skipping
[INFO] Merging audio chunks...
Done. Output saved to ./output/result_20251029.mp4
  </pre>
</div>

<script>
  const copyBtn = document.getElementById('copyBtn');
  const consolePre = document.getElementById('consolePre');
  const copiedMsg = document.getElementById('copiedMsg');

  async function fallbackCopy(text) {
    // fallback for older browsers
    const ta = document.createElement('textarea');
    ta.value = text;
    ta.style.position = 'fixed';
    ta.style.opacity = '0';
    document.body.appendChild(ta);
    ta.focus();
    ta.select();
    try {
      document.execCommand('copy');
      document.body.removeChild(ta);
      return true;
    } catch (e) {
      document.body.removeChild(ta);
      return false;
    }
  }

  async function copyConsoleText() {
    const text = consolePre.innerText;
    if (!text) return;
    try {
      if (navigator.clipboard && navigator.clipboard.writeText) {
        await navigator.clipboard.writeText(text);
      } else {
        const ok = await fallbackCopy(text);
        if (!ok) throw new Error('fallback failed');
      }
      // show feedback
      copiedMsg.classList.add('show');
      setTimeout(() => copiedMsg.classList.remove('show'), 1400);
      // small visual pulse on button
      copyBtn.animate([{ transform: 'scale(1)' }, { transform: 'scale(0.98)' }, { transform: 'scale(1)' }], { duration: 220 });
    } catch (err) {
      // on error, select text so user can manually copy
      try {
        const range = document.createRange();
        range.selectNodeContents(consolePre);
        const sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(range);
      } catch (e) {}
      alert('Không thể sao chép tự động — vui lòng chọn và sao chép thủ công.');
    }
  }

  copyBtn.addEventListener('click', copyConsoleText);

  // optional: click pre to select all (convenient)
  consolePre.addEventListener('click', () => {
    try {
      const range = document.createRange();
      range.selectNodeContents(consolePre);
      const sel = window.getSelection();
      sel.removeAllRanges();
      sel.addRange(range);
    } catch (e){}
  });
</script>

</body>
</html>
